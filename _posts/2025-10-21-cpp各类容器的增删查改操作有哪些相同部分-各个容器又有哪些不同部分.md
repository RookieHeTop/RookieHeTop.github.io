---
layout: post
title: cpp各类容器的增删查改操作有哪些相同部分，各个容器又有哪些不同部分
date: 2025-10-21 20:42 +0800
tags: [STL]
description: STL各类容器的操作函数相同与不同（无详细使用方式）
---


## 通用操作（所有容器都支持）

| 操作类型                | 函数/方法               | 说明          |
| ------------------- | ------------------- | ----------- |
| **容量查询**            | `size()`, `empty()` | 返回元素数量和是否为空 |
| **清空容器**            | `clear()`           | 移除所有元素      |
| **迭代器/反向迭代器/常量迭代器** | `begin()`, `end()`  | 获取迭代器       |
| **范围构造**            | 构造函数接受迭代器范围         | 从其他容器范围构造   |
| **比较操作**            | `==`, `!=`, `<` 等   | 容器间比较       |

## 序列容器特有操作

| 操作         | vector                    | deque            | list    | forward_list       | 说明         |
| ------------ | ------------------------- | ---------------- | ------- | ------------------ | ------------ |
| **头部插入** | ❌                         | `push_front()` ✅ | `...` ✅ | `...` ✅            | 头部添加元素 |
| **中间插入** | `insert()` 🟡              | `...` 🟡          | `...` ✅ | `insert_after()` ✅ | 指定位置插入 |
| **尾部插入** | `push_back()` ✅           | `...` ✅          | `...` ✅ | ❌                  | 尾部添加元素 |
| **头部删除** | ❌                         | `pop_front()` ✅  | `...` ✅ | `...` ✅            | 移除头部元素 |
| **中间删除** | `erase()` 🟡               | `...` 🟡          | `...` ✅ | `erase_after()` ✅  | 指定位置删除 |
| **尾部删除** | `pop_back()` ✅            | `...` ✅          | `...` ✅ | ❌                  | 移除尾部元素 |
| **容量管理** | `reserve()`, `capacity()` | ❌                | ❌       | ❌                  | 预分配内存   |
| **随机访问** | `operator[]` ✅            | `operator[]` ✅   | ❌       | ❌                  | 下标访问     |

**图例**: ✅ O(1) | 🟡 O(n) | `...` 名字同左

## 关联容器特有操作

| 操作         | set/map                          | multiset/multimap | unordered_set/map                 | 说明         |
| ------------ | -------------------------------- | ----------------- | --------------------------------- | ------------ |
| **插入元素** | `insert()`                       | `...`             | `...`                             | 插入元素     |
| **键查找**   | `find()` ✅                       | `...` ✅           | `...` 🟢                           | 查找键       |
| **键计数**   | `count()` ✅                      | `...` ✅           | `...` 🟢                           | 键出现次数   |
| **键删除**   | `erase(key)` ✅                   | `...` ✅           | `...` 🟢                           | 按键删除     |
| **范围查找** | `lower_bound()`, `upper_bound()` | 同左              | ❌                                 | 有序范围查找 |
| **哈希接口** | ❌                                | ❌                 | `bucket_count()`, `load_factor()` | 哈希表管理   |

**图例**: ✅ O(log n) | 🟢 O(1)平均 | `...` 名字同左

## 特殊操作说明

### 仅 list/forward_list 支持
- `splice()` - O(1) 转移元素
- `merge()` - O(n) 合并有序链表  
- `sort()` - O(n log n) 链表排序
- `unique()` - O(n) 去重相邻重复元素

### 仅 vector 支持
- `reserve()` - 预分配内存
- `capacity()` - 查询容量
- `shrink_to_fit()` - 释放多余内存

### 仅 unordered 容器支持
- `bucket_count()`          // 桶数量
- `load_factor() `         // 负载因子
- `rehash(100)`         // 重新哈希

## 选择指南

```c++
// 需要随机访问 + 尾部操作/内存紧凑：vector(deque也可以进行随机访问，只不过与vector相比比较慢)
std::vector<int> vec;
for(int i = 0; i < 1000; ++i) vec.push_back(i);
int value = vec[500];  // 快速随机访问

// 需要频繁任意位置插入删除：list（大文件处理，避免重新分配）（forward_list  ）
std::list<int> lst;
auto it = lst.begin();
std::advance(it, 500);
lst.insert(it, 999);  // O(1)插入

// 需要快速查找 + 有序：set/map
std::set<int> s;
s.insert(5);
if(s.find(5) != s.end()) { /* 快速查找 */ }

// 需要最快查找 + 不要求顺序：unordered_set/map
std::unordered_set<int> us;
us.insert(5);
if(us.find(5) != us.end()) { /* 更快查找 */ }

// 需要双端队列：deque
std::deque<int> dq;
dq.push_front(1);
dq.push_back(2);
int front = dq.front();  // 高效访问两端
```

